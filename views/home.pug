extends layout

block content
  .home-intro
    h2 Après : version optimisée
    p Cette démo illustre un site optimisé avec des images légères, une bande passante réduite et une empreinte carbone numérique plus faible.

  .media-grid
    each img in ['impact_chart.webp', 'img_greenit_app_it.webp', 'markus-spiske-_kB9NKpErH4-unsplash.webp']
      .media-item
        img(src=`/images/${img}`, alt=img loading="lazy")

  .media-grid
    .media-item
      video.video-player(
        autoplay
        muted
        loop
        playsinline
        width="360"
        loading="lazy"
        id="video1"
      )
        source(src="/videos/3130284-uhd_3840_2160_30fps.webm" type="video/webm")
        | Votre navigateur ne supporte pas la balise vidéo.

    .media-item
      video.video-player(
        autoplay
        muted
        loop
        playsinline
        width="360"
        loading="lazy"
        id="video2"
      )
        source(src="/videos/1085656-uhd_3840_2160_25fps.webm" type="video/webm")
        | Votre navigateur ne supporte pas la balise vidéo.

    .eco-paragraph
    h3 Pourquoi cette optimisation ?
    p
      | Nous montrons comment les bonnes pratiques d'optimisation Web contribuent à la réduction de l'empreinte carbone numérique.
      | Cette version charge des ressources de manière plus efficace pour un impact environnemental réduit.
      br
      h4 Comment avons-nous optimisé le site ?
      p
        | Nous avons compressé les images et les vidéos, utilisé le lazy loading pour les médias, et mis en cache les ressources pour éviter de les recharger inutilement.
        | Les vidéos sont limitées à une durée maximale pour éviter des chargements trop longs, et les images sont converties au format WebP, plus léger.
        | Nous avons également supprimé des éléments comme la pluie de fleurs et la vidéo en arrière-plan pour alléger la page.


  .accordion-container
    each item, idx in accordionData
      .accordion-item
        button.accordion-toggle(type='button', data-index=idx)= item.title
        .accordion-content.hidden
          p= item.text

  .home-footer
    p Pour découvrir les fonctionnalités, connectez-vous via les onglets en haut.

  // Ajout du script pour arrêter la vidéo après un certain temps
  script.
    document.addEventListener('DOMContentLoaded', function() {
      var video1 = document.getElementById('video1');
      var video2 = document.getElementById('video2');
      var maxDuration = 30; // Durée maximale en secondes avant d'arrêter la vidéo

      // Arrêter la première vidéo après la durée maximale
      video1.addEventListener('play', function() {
        setTimeout(function() {
          video1.pause();
        }, maxDuration * 1000); // maxDuration en millisecondes
      });

      // Arrêter la deuxième vidéo après la durée maximale
      video2.addEventListener('play', function() {
        setTimeout(function() {
          video2.pause();
        }, maxDuration * 1000); // maxDuration en millisecondes
      });
    });
